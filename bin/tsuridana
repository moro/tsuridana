# coding: utf-8
# vim:set ft=ruby:
$:.unshift File.expand_path("../lib", File.dirname(__FILE__))
require 'tsuridana/step_definitions'

module Tsuridana
  class Bin
    class << self
      def display(step_path)
        new(step_path).display
      end
    end

    def initialize(step_path)
      @step_src = StepDefinitions.new(step_path)
      @step_src.parse('')
    end

    def display
      @step_src.step_definitions.each do |step|
        puts "%s : %s\n  (%s:%d)" % [step.keyword, step.re_src, @step_src.src, step.lino]
      end
    end
  end
end

ARGV.each do |f|
  Tsuridana::Bin.display(f)
end
